<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Ø­Ø³Ø§Ø¨ Ø§Ù„Ø·Ø§Ù„Ø¨</title>
<link rel="stylesheet" href="style.css">
</head>
<body>

<header>ğŸ“ Ø«Ø§Ù†ÙˆÙŠØ© Ø§Ù„ØªØ­Ø¯ÙŠ Ø§Ù„Ø£Ù‡Ù„ÙŠØ©</header>

<div class="navbar">
  <a href="dashboard.html">ğŸ  Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©</a>
  <a href="chat.html">ğŸ’¬ Ø§Ù„Ø¯Ø±Ø¯Ø´Ø©</a>
  <a href="notifications.html">ğŸ“¢ Ø§Ù„ØªØ¨Ù„ÙŠØºØ§Øª</a>
  <a href="#" onclick="logout()">ğŸšª ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø®Ø±ÙˆØ¬</a>
</div>

<div class="container" id="studentData">
  <p style="text-align:center;">Ø¬Ø§Ø±Ù ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª...</p>
</div>

<script>
if(localStorage.getItem("loggedIn") !== "true") window.location.href="index.html";

async function loadStudent(){
  const studentData = JSON.parse(localStorage.getItem("studentData"));
  if(!studentData) {
    document.getElementById("studentData").innerHTML = "<p>âŒ Ù„Ù… ÙŠØªÙ… Ø§Ù„Ø¹Ø«ÙˆØ± Ø¹Ù„Ù‰ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø·Ø§Ù„Ø¨.</p>";
    return;
  }

  const student = studentData;
  const output = document.getElementById("studentData");
  let html = "";

  html += `<div class="section">
    <h3>ğŸ§¾ Ø§Ù„Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ø¹Ø§Ù…Ø©</h3>
    <table>
      <tr><th>Ø§Ù„Ø§Ø³Ù… Ø§Ù„ÙƒØ§Ù…Ù„</th><td>${student["Ø§Ø³Ù… Ø§Ù„Ø·Ø§Ù„Ø¨"]}</td></tr>
      <tr><th>Ø§Ù„ØµÙ</th><td>${student["Ø§Ù„ØµÙ"]}</td></tr>
      <tr><th>Ø§Ù„Ù‚Ø§Ø¹Ø©</th><td>${student["Ø§Ù„Ù‚Ø§Ø¹Ø©"]}</td></tr>
      <tr><th>Ø§Ù„Ø¬Ù†Ø³</th><td>${student["Ø§Ù„Ø¬Ù†Ø³"]}</td></tr>
      <tr><th>Ø±Ù‚Ù… Ø§Ù„Ø·Ø§Ù„Ø¨</th><td><input type="text" id="studentNumber" value="${student["Ø±Ù‚Ù… Ø§Ù„Ø·Ø§Ù„Ø¨"] || ""}"></td></tr>
      <tr><th>Ø±Ù‚Ù… ÙˆÙ„ÙŠ Ø§Ù„Ø£Ù…Ø±</th><td>${student["Ø±Ù‚Ù… ÙˆÙ„ÙŠ Ø§Ù„Ø§Ù…Ø±"] || "ØºÙŠØ± Ù…ØªÙˆÙØ±"}</td></tr>
      <tr><th>Ø±Ù‚Ù… Ø§Ù„Ø®Ø·</th><td><input type="text" id="line" value="${student["Ø±Ù‚Ù… Ø§Ù„Ø®Ø·"]||""}"></td></tr>
      <tr><th>Ø§Ù„Ø¹Ù†ÙˆØ§Ù†</th><td><input type="text" id="address" value="${student["Ø§Ù„Ø¹Ù†ÙˆØ§Ù†"]||""}"></td></tr>
      <tr><th>Ø§Ù„Ù…Ø¯Ø±Ø³Ø© Ø§Ù„Ù‚Ø§Ø¯Ù…Ø© Ù…Ù†Ù‡Ø§</th><td><input type="text" id="prevSchool" value="${student["Ø§Ù„Ù…Ø¯Ø±Ø³Ø© Ø§Ù„Ø³Ø§Ø¨Ù‚Ø©"]||""}"></td></tr>
    </table>
    <div style="text-align:center; margin-top:10px;">
      <button onclick="saveGeneral()">ğŸ’¾ Ø­ÙØ¸ Ø§Ù„ØªØ¹Ø¯ÙŠÙ„Ø§Øª</button>
    </div>
  </div>`;

  // Ø§Ù„Ù‚Ø³Ù… Ø§Ù„Ù…Ø§Ù„ÙŠ
  html += `<div class="section"><h3>ğŸ’° Ø§Ù„Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ù…Ø§Ù„ÙŠØ©</h3><table>
      <tr><th>Ø§Ù„Ù‚Ø³Ø· 1</th><td>${student["Ø§Ù„Ù‚Ø³Ø· 1"]||""}</td></tr>
      <tr><th>ØªØ§Ø±ÙŠØ® 1</th><td>${student["ØªØ§Ø±ÙŠØ® 1"]||""}</td></tr>
      <tr><th>Ø§Ù„Ù‚Ø³Ø· 2</th><td>${student["Ø§Ù„Ù‚Ø³Ø· 2"]||""}</td></tr>
      <tr><th>ØªØ§Ø±ÙŠØ® 2</th><td>${student["ØªØ§Ø±ÙŠØ® 2"]||""}</td></tr>
      <tr><th>Ø§Ù„Ù‚Ø³Ø· 3</th><td>${student["Ø§Ù„Ù‚Ø³Ø· 3"]||""}</td></tr>
      <tr><th>ØªØ§Ø±ÙŠØ® 3</th><td>${student["ØªØ§Ø±ÙŠØ® 3"]||""}</td></tr>
  </table></div>`;

  // Ø§Ù„Ø¯Ø±Ø¬Ø§Øª
  html += `<div class="section"><h3>ğŸ“˜ Ø§Ù„Ø¯Ø±Ø¬Ø§Øª</h3>
  <p>${student["Ø§Ù„Ø¯Ø±Ø¬Ø§Øª"]||"Ù„Ø§ ØªÙˆØ¬Ø¯ Ø¨ÙŠØ§Ù†Ø§Øª Ø­Ø§Ù„ÙŠØ§Ù‹."}</p></div>`;

  // Ø§Ù„Ù…Ù„Ø§Ø­Ø¸Ø§Øª ÙˆØ§Ù„ØºÙŠØ§Ø¨
  html += `<div class="section"><h3>ğŸ“ Ø§Ù„Ù…Ù„Ø§Ø­Ø¸Ø§Øª ÙˆØ§Ù„ØºÙŠØ§Ø¨</h3>
  <p>${student["Ù…Ù„Ø§Ø­Ø¸Ø§Øª"]||"Ù„Ø§ ØªÙˆØ¬Ø¯ Ù…Ù„Ø§Ø­Ø¸Ø§Øª"}</p></div>`;

  output.innerHTML = html;
}

function saveGeneral(){
  const studentData = JSON.parse(localStorage.getItem("studentData"));
  if(!studentData) return alert("Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª");

  // ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø­Ù‚ÙˆÙ„ Ø§Ù„Ù‚Ø§Ø¨Ù„Ø© Ù„Ù„ØªØ¹Ø¯ÙŠÙ„ ÙÙ‚Ø·
  studentData["Ø±Ù‚Ù… Ø§Ù„Ø·Ø§Ù„Ø¨"] = document.getElementById("studentNumber").value;
  studentData["Ø±Ù‚Ù… Ø§Ù„Ø®Ø·"] = document.getElementById("line").value;
  studentData["Ø§Ù„Ø¹Ù†ÙˆØ§Ù†"] = document.getElementById("address").value;
  studentData["Ø§Ù„Ù…Ø¯Ø±Ø³Ø© Ø§Ù„Ø³Ø§Ø¨Ù‚Ø©"] = document.getElementById("prevSchool").value;

  localStorage.setItem("studentData", JSON.stringify(studentData));
  alert("âœ… ØªÙ… Ø­ÙØ¸ Ø§Ù„ØªØ¹Ø¯ÙŠÙ„Ø§Øª Ø¨Ù†Ø¬Ø§Ø­");
}

function logout(){
  localStorage.clear();
  window.location.href = "index.html";
}

loadStudent();
</script>

</body>
</html>
