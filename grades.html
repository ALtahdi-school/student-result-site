<!DOCTYPE html>
<html lang="ar">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>الدرجات - ثانوية التحدي</title>
<link rel="stylesheet" href="style.css">
<script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.5/gsap.min.js"></script>
<style>
body {
  font-family: 'Cairo', sans-serif;
  direction: rtl;
  margin:0;
  background: linear-gradient(180deg,#f7fbff,#ffffff);
}
.app {
  max-width: 980px;
  margin:24px auto 110px;
  padding:18px;
}
.app-header {
  text-align:center;
  margin-bottom:14px;
}
.app-header h1{
  margin:0;
  background:linear-gradient(90deg,#4f46e5,#0ea5e9);
  -webkit-background-clip:text;
  color:transparent;
  font-weight:800;
}
.app-header p {
  margin:8px 0 0 0;
  color:#6b7280;
  font-size:13px;
}
.card{
  background:#fff;
  border-radius:14px;
  padding:18px;
  box-shadow:0 12px 30px rgba(15,23,42,0.08);
  margin-bottom:14px;
  transform: translateY(18px);
  opacity:0;
  transition: transform .6s, opacity .6s;
}
.card h3 {
  margin-bottom:10px;
  background: linear-gradient(90deg,#4f46e5,#0ea5e9);
  color:#fff;
  padding:8px 12px;
  border-radius:10px;
}
table {
  width:100%;
  border-collapse: collapse;
  font-size:14px;
  margin-top:6px;
}
th, td {
  border:1px solid #e6e9ef;
  padding:6px 8px;
  text-align:center;
}
th { background:#f0f4ff; color:#1e3a8a; }
.bottom-nav {
  position: fixed;
  bottom:0;
  left:0;
  right:0;
  height:60px;
  background:#fff;
  display:flex;
  justify-content:space-around;
  align-items:center;
  box-shadow:0 -4px 15px rgba(0,0,0,0.08);
}
.bottom-nav a {
  text-decoration:none;
  color:#6b7280;
  font-size:12px;
  display:flex;
  flex-direction:column;
  align-items:center;
}
.bottom-nav a.active { color:#4f46e5; }
.bottom-nav a span { margin-top:2px; }
</style>
</head>
<body>
<div class="app">
  <div class="app-header">
    <h1>الدرجات التفصيلية</h1>
    <p>عرض جميع درجات المواد والأقسام</p>
  </div>

  <div id="gradesData"></div>
</div>

<nav class="bottom-nav">
  <a href="account.html">👤<span>الحساب</span></a>
  <a href="grades.html" class="active">📚<span>الدرجات</span></a>
  <a href="notifications.html">🔔<span>التبليغات</span></a>
  <a href="chat.html">💬<span>الدردشة</span></a>
</nav>

<script>
function getSession(){ return JSON.parse(sessionStorage.getItem('studentData')||'null'); }
function requireLogin(){ if(!getSession()){ window.location.href='index.html'; return false;} return true; }

document.addEventListener('DOMContentLoaded', ()=>{
  if(!requireLogin()) return;
  const student = getSession();
  const container = document.getElementById('gradesData');

  // جميع المواد والأقسام حسب طلبك
  const subjects = [
    'اسلامية','العربي','الانكليزي','الرياضيات','الكيمياء','الفيزياء',
    'الاحياء','الاجتماعيات','الحاسوب','رياضة','الفنية','السلوك'
  ];

  let html = '';
  subjects.forEach(sub=>{
    html += `<div class="card"><h3>${sub}</h3><table><tr>`;

    // جمع كل المفاتيح التي تبدأ باسم المادة
    const keys = Object.keys(student).filter(k => k.startsWith(sub));
    // عناوين الجدول
    keys.forEach(k => html += `<th>${k}</th>`);
    html += '</tr><tr>';
    keys.forEach(k => html += `<td>${student[k] || ''}</td>`);
    html += '</tr></table></div>';
  });

  // قسم الغياب والملاحظات
  html += `<div class="card"><h3>الغياب والملاحظات</h3><table>
    <tr><th>ملاحظات كرت</th><th>ملاحظات النتيجة</th><th>اختلاق مشاكل داخل المدرسة</th></tr>
    <tr>
      <td>${student['ملاحظات كرت']||''}</td>
      <td>${student['ملاحظات النتيجة']||''}</td>
      <td>${student['اختلاق مشاكل داخل المدرسة']||''}</td>
    </tr>
  </table></div>`;

  container.innerHTML = html;
  gsap.fromTo('.card',{opacity:0,y:20},{opacity:1,y:0,duration:0.7,stagger:0.1});
});
</script>
</body>
</html>
